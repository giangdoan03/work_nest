<template>
    <a-card size="small" bordered class="switcher">
        <div class="switcher-row">
            <a-space>
                <a-typography-text strong>Vai tr√≤:</a-typography-text>

                <a-select
                    v-model:value="role"
                    style="width: 220px"
                    :options="roles"
                />
            </a-space>

            <a-button type="primary" @click="openCreateModal">
                + T·∫°o h·ªì s∆° tr√¨nh duy·ªát
            </a-button>
        </div>
    </a-card>

    <!-- MODAL -->
    <WorkflowCreateModal
        v-model:open="createOpen"
        @submitted="onCreated"
    />
</template>

<script setup>
import { ref, watch } from 'vue'
import WorkflowCreateModal from './WorkflowCreateModal.vue'

/* ================= ROLE ================= */
const role = ref('NV_KD')

const roles = [
    { label: 'Nh√¢n vi√™n Kinh doanh', value: 'NV_KD' },
    { label: 'Tr∆∞·ªüng ph√≤ng Kinh doanh', value: 'TP_KD' },
    { label: 'Nh√¢n vi√™n Th∆∞∆°ng m·∫°i', value: 'NV_TM' },
    { label: 'Tr∆∞·ªüng ph√≤ng Th∆∞∆°ng m·∫°i', value: 'TP_TM' },
    { label: 'PGƒê Th∆∞∆°ng m·∫°i', value: 'PGD_TM' },
    { label: 'PGƒê Kinh doanh', value: 'PGD_KD' },
    { label: 'Gi√°m ƒë·ªëc', value: 'GD' },
]

watch(role, (v) => {
    console.log('üîÅ ƒê·ªïi role:', v)
    // TODO: set store (pinia)
})

/* ================= MODAL ================= */
const createOpen = ref(false)

const openCreateModal = () => {
    createOpen.value = true
}

const onCreated = () => {
    console.log('‚úÖ Workflow created')
    // TODO: emit event / store reload board
}
</script>

<style scoped>
.switcher {
    margin-bottom: 12px;
}

.switcher-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
}
</style>
